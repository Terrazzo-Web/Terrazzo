name: Test
runs:
  using: "composite"
  steps:
    # Avoids race with two build scripts installing wasm-bindgen-cli at the same time.
    - name: First compile
      run: |
        cargo build --bin game --features server
        cargo build --bin web-terminal --features server
      shell: bash
    - name: Test
      run: cargo test
      shell: bash
    - name: Test client
      run: cargo test --features=client
      shell: bash
    - name: Test server
      run: cargo test --features=server
      shell: bash
